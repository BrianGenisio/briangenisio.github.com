<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>This is Brian Genisio&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="This is Brian Genisio&#39;s Blog">
<meta property="og:url" content="http://briangenisio.com/page/3/index.html">
<meta property="og:site_name" content="This is Brian Genisio&#39;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="This is Brian Genisio&#39;s Blog">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo logo-text" href="/">Brian Genisio&#39;s Blog</a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://briangenisio.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer">
      <article id="post-software/2014/08/25/building-your-nodebot.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/software/2014/08/25/building-your-nodebot.html">Building Your NodeBot</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/software/2014/08/25/building-your-nodebot.html" class="article-date">
  <time datetime="2014-08-25T04:00:00.000Z" itemprop="datePublished">2014-08-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Software/">Software</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>For our <a href="/software/2014/08/23/rise-of-the-nodebots.html">“Battle of the NodeBots” Hackathon project</a>, we will be building a bot to compete against other bots.  We have a kit which includes the following components.  </p>
<ul>
<li>(1) <a href="http://www.sainsmart.com/sainsmart-uno-r3-atmega328-au-development-board-compatible-with-arduino-uno-r3.html" target="_blank" rel="external">SainSmart Uno Arduino Clone</a></li>
<li>5mm Wood Platform – (1) 3” x 6.75” panel and (2) 2.5” wheels</li>
<li>(2) Parallax <a href="http://www.parallax.com/product/900-00008" target="_blank" rel="external">Continuous Rotation Servos</a></li>
<li>(1) <a href="http://www.amazon.com/TruePower-Roller-Ball-Transfer-Bearings/dp/B009KAQVWC/ref=sr_1_4" target="_blank" rel="external">5/8” Ball Caster</a></li>
<li>(1) <a href="http://www.amazon.com/SYB-170-Color-Board-Small-Bread/dp/B00ARUF2JM/ref=sr_1_2" target="_blank" rel="external">Small Breadboard</a></li>
<li>(6) <a href="http://www.amazon.com/Wosang-Solderless-Flexible-Breadboard-Jumper/dp/B005TZJ0AM/ref=pd_bxgy_e_img_y" target="_blank" rel="external">Solderless Breadboard Wires</a></li>
<li>(2) <a href="http://www.amazon.com/5pcs-Angle-Single-Header-Strip/dp/B0079SK5MO/ref=sr_1_4" target="_blank" rel="external">3-pin Headers</a></li>
<li>(1) 10’ USB Cable (A to B)</li>
<li>(1) 9v Battery</li>
<li>(1) 9v to 2.1mm Battery Clip</li>
<li>(4) Zipties</li>
<li>(2) 1” Double-Stick Tape</li>
<li>(6) #6x3/8” Self-Drilling Screws</li>
</ul>
<p>You are encouraged to build your bot however you want, but this is how you can build it without any modifications from the original design.</p>
<h3 id="Lay-out-your-parts"><a href="#Lay-out-your-parts" class="headerlink" title="Lay out your parts"></a>Lay out your parts</h3><p>You want to get a feel for where everything will go.  Lay your major components out on the board and rough-in where you think you’d like them to go.<br><img src="/images/nodebot-assemble/nodebot-rough-out.JPG" alt="Rough-out the parts"></p>
<h3 id="Attach-your-wheels-to-your-servos"><a href="#Attach-your-wheels-to-your-servos" class="headerlink" title="Attach your wheels to your servos"></a>Attach your wheels to your servos</h3><p>The easiest way to do this is to remove the servo horn and attach the horn to the wheels using the self-drilling screws.  The holes in the servo horn are smaller than the screws but these things make quick work of the plastic and go right through to the wood.  Just make sure they are centered. Reattach the horns when you are done.<br><img src="/images/nodebot-assemble/nodebot-attach-wheels-to-servo.JPG" alt="Attach the wheels to the servo horns"></p>
<h3 id="Attach-the-servos-to-your-chassis"><a href="#Attach-the-servos-to-your-chassis" class="headerlink" title="Attach the servos to your chassis"></a>Attach the servos to your chassis</h3><p>You can do this however you want.  A quick-and-dirty approach is to use double-sided tape.  I prefer zip-ties.  Figure out where you want the servos to sit and mark it on the board.  Use a drill to punch a hole through the wood.  Attach the servos to the wood using zip-ties and snip off the excess zip-tie.</p>
<p><img src="/images/nodebot-assemble/nodebot-mark-servo-location.JPG" alt="Mark your servo location"><br><img src="/images/nodebot-assemble/nodebot-attach-servos.JPG" alt="Attach the servos with zip-ties"></p>
<h3 id="Attach-the-caster-wheel-to-the-bottom-of-the-chassis"><a href="#Attach-the-caster-wheel-to-the-bottom-of-the-chassis" class="headerlink" title="Attach the caster wheel to the bottom of the chassis"></a>Attach the caster wheel to the bottom of the chassis</h3><p>The self-drilling screws are really useful for this.<br><img src="/images/nodebot-assemble/nodebot-attach-caster2.JPG" alt="Attach the front caster wheel"></p>
<h3 id="Attach-the-Arduino-and-Breadboard"><a href="#Attach-the-Arduino-and-Breadboard" class="headerlink" title="Attach the Arduino and Breadboard"></a>Attach the Arduino and Breadboard</h3><p>Affix the Arduino using double-stick tape.  Affix the breadboard using the attached mounting tape.<br><img src="/images/nodebot-assemble/nodebot-attach-boards.JPG" alt="Affix the boards"></p>
<h3 id="Mount-the-battery"><a href="#Mount-the-battery" class="headerlink" title="Mount the battery"></a>Mount the battery</h3><p>Using double-stick tape, affix the battery to the bot.  Connect it to the Arduino using the 9v clip.<br><img src="/images/nodebot-assemble/nodebot-attach-battery.JPG" alt="Affix the battery"></p>
<h3 id="Power-the-servos-from-the-board"><a href="#Power-the-servos-from-the-board" class="headerlink" title="Power the servos from the board"></a>Power the servos from the board</h3><p>You are not likely to keep the servos here permanently, but this is a good starting point.  Pins 9 and 10 support PWM signals, which are best for servos.  You can connect them to the SVG pin headers for now.  The white leads are the “signal” for the SVG pins.</p>
<p><img src="/images/nodebot-assemble/nodebot-plug-servos.JPG" alt="Power the servos"></p>
<p>Your servos may start spinning now.  If that happens, you can trim them using the screws on the back of the servos.  You may need to do this again once you have hooked your system up to the software.</p>
<p><img src="/images/nodebot-assemble/nodebot-calibrate.JPG" alt="Trim the servos"></p>
<h3 id="Start-programming-your-bot"><a href="#Start-programming-your-bot" class="headerlink" title="Start programming your bot!"></a>Start programming your bot!</h3><p>Now you have a working bot.  You can plug your USB cable into the board and go to town.  If you haven’t already <a href="/software/2014/08/25/bootstrapping-your-arduino-with-firmata-and-johnny-five.html">gotten yourself bootstrapped</a> (<a href="/software/2014/08/25/using-visual-studio-to-program-your-nodebot.html">or with Visual Studio</a>), now is a good time.</p>
<p>Take a look at the <a href="https://github.com/rwaldron/johnny-five/wiki/Servo" target="_blank" rel="external">servo API</a> in Johnny-Five to get you started.  Here is a <a href="https://github.com/rwaldron/johnny-five/blob/master/docs/servo-continuous.md" target="_blank" rel="external">simple example</a> that will rotate your 10-pin servo clockwise.</p>
<p><img src="/images/nodebot-assemble/nodebot-program-bot.JPG" alt="Start Programming"></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Arduino/">Arduino</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Johnny-Five/">Johnny-Five</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeBots/">NodeBots</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-software/2014/08/25/bootstrapping-your-arduino-with-firmata-and-johnny-five.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/software/2014/08/25/bootstrapping-your-arduino-with-firmata-and-johnny-five.html">Bootstrapping your Arduino with Firmata and Johnny-Five</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/software/2014/08/25/bootstrapping-your-arduino-with-firmata-and-johnny-five.html" class="article-date">
  <time datetime="2014-08-25T04:00:00.000Z" itemprop="datePublished">2014-08-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Software/">Software</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here is a little screencast I put together to get all the software you need to get started with your NodeBot.  The instructions are exactly the same for Windows. Unless, of course, you want to <a href="/software/2014/08/25/using-visual-studio-to-program-your-nodebot.html">use Visual Studio</a>.  </p>
<ul>
<li><a href="http://arduino.cc/en/Main/Software" target="_blank" rel="external">Arduino IDE</a></li>
<li><a href="http://nodejs.org" target="_blank" rel="external">Node.js</a></li>
<li><a href="https://github.com/rwaldron/johnny-five" target="_blank" rel="external">Johnny-Five</a>   </li>
</ul>
<iframe width="640" height="360" src="//www.youtube.com/embed/j-Xvb386Dr0" frameborder="0" allowfullscreen></iframe>




      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Arduino/">Arduino</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Johnny-Five/">Johnny-Five</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeBots/">NodeBots</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-software/2014/08/23/rise-of-the-nodebots.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/software/2014/08/23/rise-of-the-nodebots.html">Rise of the NodeBots</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/software/2014/08/23/rise-of-the-nodebots.html" class="article-date">
  <time datetime="2014-08-23T04:00:00.000Z" itemprop="datePublished">2014-08-23</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Software/">Software</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Every 8 weeks at <a href="http://letsfixhealthcare.com" target="_blank" rel="external">our company</a>, we take two days off to hack on something new.  It is a chance to try new ideas, learn new technologies, or exercise our brain in ways we don’t tend to do in our everyday roles.  These “Hackathons” are fully supported by the owner of our company as he believes these periodic shifting of gears are beneficial to our creativity and to our product portfolio.</p>
<p>We don’t always produce something useful.  Sometimes we learn that a given technology or approach is not for us.  Sometimes, however, we take what we learn and apply the ideas directly to our product.  Dozens of features and even full products have their roots in our “Hackathons”.  They have proven to be exceptionally beneficial for the culture of our workplace.</p>
<h3 id="Trying-Something-New-–-NodeBots"><a href="#Trying-Something-New-–-NodeBots" class="headerlink" title="Trying Something New – NodeBots"></a>Trying Something New – NodeBots</h3><p><img src="/images/nodebot-army.JPG" alt="Nodebot Army"></p>
<p>At our next Hackathon, we are organizing an event: “Battle of the NodeBots”.  Approximately 20 of us will be building robots that will fight in a ring for supremacy.  Everyone will be given the same base kit.  If any of us build the kit like the reference bot, it is very unlikely we will win – those with beneficial innovations are likely to have the advantage.</p>
<p>Innovations will come in one of three forms:</p>
<ul>
<li><strong>Software:</strong> Pre-programmed maneuvers, articulated control, sensing systems, etc will help the bot gain an edge in the “brains” department.  Most people will be using Node and <a href="https://github.com/rwaldron/johnny-five" target="_blank" rel="external">Jonhhy-Five</a> to program their bots, though nothing is stopping anyone from writing C code that runs on the metal.</li>
<li><strong>Electronics:</strong> Extra servos, motors, controllers, or sensors will help the bot gain an edge in the “motion and sensing” department. This is where most of us will be learning the most.  We are software developers, not electronics engineers!  We will have a library of electronics components to pull from.</li>
<li><strong>Mechanical:</strong> Wheel traction, caster location, weight, size, articulated parts, etc will gain an edge in the “physical” department.  We will have a library of building supplies to pull from.</li>
</ul>
<h3 id="The-Kit"><a href="#The-Kit" class="headerlink" title="The Kit"></a>The Kit</h3><p><img src="/images/nodebot-kit.JPG" alt="Nodebot Army"></p>
<p>Inspired by the <a href="http://sumobotkit.com/" target="_blank" rel="external">SumoBot Jr.</a> and the <a href="https://github.com/nodebotsau/SimpleBot" target="_blank" rel="external">SimpleBot</a>, I was able to put together a kit that came in around $45 per bag.  This is the kit we that everyone will get:</p>
<ul>
<li>(1) <a href="http://www.sainsmart.com/sainsmart-uno-r3-atmega328-au-development-board-compatible-with-arduino-uno-r3.html" target="_blank" rel="external">SainSmart Uno Arduino Clone</a></li>
<li>5mm Wood Platform – (1) 3” x 6.75” panel and (2) 2.5” wheels</li>
<li>(2) Parallax <a href="http://www.parallax.com/product/900-00008" target="_blank" rel="external">Continuous Rotation Servos</a></li>
<li>(1) <a href="http://www.amazon.com/TruePower-Roller-Ball-Transfer-Bearings/dp/B009KAQVWC/ref=sr_1_4" target="_blank" rel="external">5/8” Ball Caster</a></li>
<li>(1) <a href="http://www.amazon.com/SYB-170-Color-Board-Small-Bread/dp/B00ARUF2JM/ref=sr_1_2" target="_blank" rel="external">Small Breadboard</a></li>
<li>(6) <a href="http://www.amazon.com/Wosang-Solderless-Flexible-Breadboard-Jumper/dp/B005TZJ0AM/ref=pd_bxgy_e_img_y" target="_blank" rel="external">Solderless Breadboard Wires</a></li>
<li>(2) <a href="http://www.amazon.com/5pcs-Angle-Single-Header-Strip/dp/B0079SK5MO/ref=sr_1_4" target="_blank" rel="external">3-pin Headers</a></li>
<li>(1) 10’ USB Cable (A to B)</li>
<li>(1) 9v Battery</li>
<li>(1) 9v to 2.1mm Battery Clip</li>
<li>(4) Zipties</li>
<li>(2) 1” Double-Stick Tape</li>
<li>(6) #6x3/8” Self-Drilling Screws</li>
</ul>
<p>Here is the bot fully assembled:<br><img src="/images/nodebot-assembled.JPG" alt="Nodebot Army"></p>
<h3 id="The-Lab"><a href="#The-Lab" class="headerlink" title="The Lab"></a>The Lab</h3><p>In order to enable everyone to be creative, we will have a stocked lab:</p>
<ul>
<li>Electronics (Resistors, Capacitors, Diodes, Transistors, Wires, Headers, etc)</li>
<li>Displays (LEDs, LED Arrays, 8-Segments, Tri-color LEDs, LCDs, etc)</li>
<li>Locomotion (Servos, Motors, Gears, Propellers, etc)</li>
<li>Sensors (Light, Proximity, Temperature, Water, etc)</li>
<li>Control (Switches, Joysticks, Keypads, Potentiometers)</li>
<li>Building (Soldering Iron, Hot Glue Gun, Drills, Saws, Voltmeters, Screw Drivers, Pliers, etc)</li>
<li>Crafts (Wood, Popsicle Sticks, Dowel Rods, Wire, Flashing, Screws, etc)</li>
</ul>
<h3 id="The-Setup"><a href="#The-Setup" class="headerlink" title="The Setup"></a>The Setup</h3><p>We are going to use <a href="https://github.com/rwaldron/johnny-five" target="_blank" rel="external">Jonhhy-Five</a> to control our bots.  This mechanism uses serial (USB) communications to talk to our Arduino via the <a href="http://firmata.org/wiki/Main_Page" target="_blank" rel="external">Firmata</a> protocol.  This will require everyone to install <a href="https://github.com/firmata/arduino/blob/master/examples/StandardFirmata/StandardFirmata.ino" target="_blank" rel="external">StandardFirmata</a> on the board.  We will have a couple of these <a href="http://www.amazon.com/JY-MCU-Arduino-Bluetooth-Wireless-Serial/dp/B009DZQ4MG/ref=sr_1_1" target="_blank" rel="external">Bluetooth to Serial adapters</a> available if anyone feels like spending their valuable time <a href="https://github.com/rwaldron/johnny-five/wiki/JY-MCU-Bluetooth-Serial-Port-Module-Notes" target="_blank" rel="external">getting it working </a>.</p>
<h3 id="More-to-Come"><a href="#More-to-Come" class="headerlink" title="More to Come!"></a>More to Come!</h3><p>I plan to document more about this event as I go.  We’ll see how it goes.  I’ll be <a href="http://twitter.com/BrianGenisio" target="_blank" rel="external">tweeting </a> photos and recording video of the battles.  Stay tuned!</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Arduino/">Arduino</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Johnny-Five/">Johnny-Five</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeBots/">NodeBots</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-software/2014/03/05/calling-actions-in-directives.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/software/2014/03/05/calling-actions-in-directives.html">Calling Actions in Directives</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/software/2014/03/05/calling-actions-in-directives.html" class="article-date">
  <time datetime="2014-03-05T05:00:00.000Z" itemprop="datePublished">2014-03-05</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Software/">Software</a>
  </div>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>The other day, a coleague asked me what the best way is to call an action on a directive.  We know that directives can call back to the parent scope, but with isolated scopes, you have no way to call into a directive to execute an action.  This type of thing is pretty rare in Angular.  Usually, our directives respond to changes in data or state which an be based off of the built-in binding capabilities.  Sometimes, however, we need to call actions on a directive.  A video player directive, for example, can benefit from actions such as <code>video.play()</code> and <code>video.pause()</code>.  </p>
<p>Some of the things to consider:</p>
<ul>
<li>When you have multiple instances, how do you tell them all to act?</li>
<li>When you have multiple instances, how do you tell only one to act?</li>
<li>How would multiple copies inside of an ng-repeat work?</li>
<li>We might want to avoid tight coupling (do we always?)</li>
</ul>
<p>So I thought about it more, and I have three possible answers to this question (there are more, but these feel most natural).  I am open to thoughts.  Is there a better way that I am missing?  I’m basing some of this off of what other widget frameworks do.  Take WinForms/WPF/Silverlight/Flex, for instance.  In those worlds, the controls (directives) expose methods.  The caller gives it a name <code>&lt;widget name=&quot;foo&quot;&gt;</code> and the framework creates variables for you to call: <code>foo.bar()</code>.  Convenient, but Angular doesn’t give us this out of the box.  What are some approaches to come close to that?</p>
<h3 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h3><p>I am assuming a directive called “arm” which can be composed to create a “puppet”.  A “puppeteer” wants to control the arms of the puppets.  Each arm has an action called <code>function wave(){ alert(&#39;wave&#39;); }</code>  All of the code for these examples can be found <a href="http://codepen.io/BrianGenisio/pen/ituKv" target="_blank" rel="external">here</a>.</p>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><p>The most obvious solution mkhere is to use events.  Events are nice because they are built in.  Events are also a bit ugly, however, because they broadcast.  We can mitigate this by namespacing our events.  The caller can call <code>$broadcast(&#39;arm:wave&#39;)</code> and the directive can hook that event: <code>$scope.$on(&#39;arm:wave&#39;, wave)</code>.</p>
<p>This works well except that in our current implementation, we can’t send a “wave” event to a specific directive.  If we borrow from other frameworks, we can just give the arm an <code>id</code> like this: <code>&lt;arm id=&quot;left&quot;&gt;&lt;/arm&gt;</code>.  Now, the puppeteer can call it: <code>$broadcast(&#39;arm: wave&#39;, &#39;left&#39;)</code>.  The directive’s code gets a bit more complex but not too bad.  It starts by binding id <code>scope: { id: &#39;@&#39; }</code> and then the event handler does this</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$scope.$on(<span class="string">'arm:wave'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e, id</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(id === <span class="literal">undefined</span> || $scope.id === id) &#123;</div><div class="line">        wave();</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>This works well.  You can broadcast to all of them by ommiting the id, or you can call one of them by using the id.  How might you do this in an <code>ng-repeat</code>?</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">arm</span> <span class="attr">ng-repeat</span>=<span class="string">"arm in arms"</span> <span class="attr">id</span>=<span class="string">"arm-&#123;&#123; '&#123;&#123;arm.id' &#125;&#125;&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">arm</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Individual calls would become <code>$broadcast(&#39;arm:wave&#39;, &#39;arm-&#39; + arm.id)</code></p>
<h3 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h3><p>Borrowing from other frameworks, this example invokes the “command” pattern.  It lets the directive define some commands that the puppeteer can call.  The directive would define a binding: <code>scope: { commands: &#39;=?&#39; }</code>.  The directive would then set the commands object: <code>$scope.commands = { wave: wave }</code>.  </p>
<p>The puppeteer can now hook up the command: <code>&lt;arm commands=&quot;left&quot;&gt;&lt;/arm&gt;</code> and use it: <code>left.wave();</code></p>
<p>This approach is arguably cleaner, but it introduces a new concept that isn’t native to Angular.  How does it scale to <code>ng-repeat</code>?</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">arm</span> <span class="attr">ng-repeat</span>=<span class="string">"arm in arms"</span> <span class="attr">commands</span>=<span class="string">"armControls[arm.i]"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Broadcast would become: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">armControls.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">arm</span>) </span>&#123; arm.wave(); &#125;);</div></pre></td></tr></table></figure>
<p>Individual calls would become: <code>armControls[arm.id].wave()</code></p>
<h3 id="Controller-Expose"><a href="#Controller-Expose" class="headerlink" title="Controller Expose"></a>Controller Expose</h3><p>Ok, so <strong>events</strong> are a bit chatty and more code than we want to copy everytime.  <strong>Commands</strong> are less code and less chatty, but they aren’t native.  It turns out that Angular already has a way to communicate via directives (directive-to-directive) by assigning functions to the controller itself.  Like this: <code>this.wave = wave;</code>.  But the puppeteer doesn’t have access to the directive’s controller.  </p>
<p>We can expose it!  Create a binding in the scope: <code>scope: { controller: &#39;=?&#39; }</code>.  Then, in the controller, you can just assign it: <code>$scope.controller = this;</code>.</p>
<p>Calling it is very similar to <strong>commands</strong>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">arm</span> <span class="attr">controller</span>=<span class="string">"left"</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Access to the actions and <code>ng-repeat</code> is exactly the same as the <strong>commands</strong> option, but the way you wire it up is more Angular-like.  With <strong>commands</strong>, you expose only what you want, but you need to explicitly expose everything.  With <strong>controller</strong>, you only do it once, and you don’t have to explicitly wire up the action, but you now get access to everything.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>In the end, I prefer the <strong>events</strong> mechanism if I am looking for a decoupled approach but a <strong>controller</strong> approach if I am looking for something a bit more coupled. I am soliciting feedback from the community since I know they are likely to have opinions.  Again, you can play with all three approaches <a href="http://codepen.io/BrianGenisio/pen/ituKv" target="_blank" rel="external">here</a>.  Thoughts?</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular/">Angular</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Directives/">Directives</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
      </nav>
    </section>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Brian Genisio&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    
<script>
  var disqus_shortname = 'briangenisio';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>